# å‰ç«¯è®¾è®¡æŠ¥å‘Š 02: äº¤äº’ä¸æµç¨‹ (Interactions & Flows)

**æ—¥æœŸ**: 2026-01-02
**åŸºäºæ–‡æ¡£**: `PRODUCT_DESIGN_V2.5.md`

## 1. æ ¸å¿ƒäº¤äº’ï¼šè¾“å…¥æ—¶å…‰æœº (The Input Machine)

è¾“å…¥æ¡†ä¸ä»…ä»…æ˜¯ä¸€ä¸ª Textareaï¼Œå®ƒæ˜¯ç³»ç»Ÿçš„æ ¸å¿ƒã€‚

### 1.1 ç»„ä»¶æ¶æ„
åŸºäº **Tiptap** (Headless Editor) æ„å»ºã€‚

-   **å¤–è§‚**: 
    -   åˆå§‹çŠ¶æ€: å•è¡Œæ–‡æœ¬æ¡†ï¼Œå ä½ç¬¦ "What's on your mind? Type '/' for commands..."
    -   Focus çŠ¶æ€: è‡ªåŠ¨å±•å¼€ï¼Œåº•éƒ¨å‡ºç°å·¥å…·æ  (Toolbar)ã€‚
-   **Slash Command (/) èœå•**:
    -   è¾“å…¥ `/` è§¦å‘æ‚¬æµ®èœå• (`tiptap-extension-floating-menu`)ã€‚
    -   **é€‰é¡¹**:
        -   ğŸ“ **Text**: æ™®é€šæ–‡æœ¬
        -   âœ… **Todo**: å¾…åŠåˆ—è¡¨
        -   ğŸ–¼ï¸ **Image**: ä¸Šä¼ å›¾ç‰‡
        -   ğŸ¤– **Ask AI**: å‘¼å« AI åŠ©æ‰‹
        -   ğŸ“„ **Template**: æ’å…¥æ¨¡æ¿ (äºŒçº§èœå•: Daily, Idea...)

### 1.2 æäº¤ä½“éªŒ (The Posting Experience)
-   **å¿«æ·é”®**: `Ctrl + Enter` (Desktop) æˆ– ç‚¹å‡»å‘é€æŒ‰é’®ã€‚
-   **ä¹è§‚æ›´æ–° (Optimistic UI)**:
    1.  ç”¨æˆ·ç‚¹å‡»å‘é€ã€‚
    2.  ç«‹å³å°†å†…å®¹æ„é€ ä¸ºä¸´æ—¶ `Message` å¯¹è±¡ï¼Œæ’å…¥åˆ° `SWR` æˆ– `React Query` çš„ç¼“å­˜åˆ—è¡¨é¡¶ç«¯ã€‚
    3.  å¡ç‰‡æ˜¾ç¤º "Sending..." çŠ¶æ€ (åŠé€æ˜æˆ–å° Spinner)ã€‚
    4.  åå° API è¯·æ±‚æˆåŠŸ -> æ›´æ–°ä¸ºæ­£å¼ IDï¼ŒçŠ¶æ€æ¶ˆå¤±ã€‚
    5.  åå° API è¯·æ±‚å¤±è´¥ -> å¡ç‰‡å˜çº¢ï¼Œæ˜¾ç¤º "Retry"ã€‚

---

## 2. æ—¶é—´çº¿äº¤äº’ (Timeline Interactions)

### 2.1 æ— é™æ»šåŠ¨ (Infinite Scroll)
-   **æŠ€æœ¯**: `IntersectionObserver` + `useSWRInfinite`ã€‚
-   **è¡Œä¸º**: æ»šåŠ¨åˆ°åº•éƒ¨å‰ 500px è‡ªåŠ¨é¢„åŠ è½½ä¸‹ä¸€é¡µã€‚
-   **æ–°æ¶ˆæ¯æç¤º**: å½“ç”¨æˆ·å‘ä¸‹æ»šåŠ¨æµè§ˆå†å²æ—¶ï¼Œå¦‚æœæœ‰æ–°æ¶ˆæ¯è¿›æ¥ï¼ˆæ¥è‡ª WebSocket æˆ–å…¶ä»–ç«¯ï¼‰ï¼Œé¡¶éƒ¨æ˜¾ç¤º "New Tweets" æ‚¬æµ®èƒ¶å›ŠæŒ‰é’®ï¼Œç‚¹å‡»å›åˆ°é¡¶éƒ¨ã€‚

### 2.2 Thread å±•å¼€ (The Thread UX)
å‚è€ƒ Twitter çš„è®¾è®¡ï¼Œè€Œä¸æ˜¯ Notion çš„æ— é™åµŒå¥—ã€‚

-   **åˆ—è¡¨è§†å›¾**: ä»…æ˜¾ç¤º `Parent` æ¶ˆæ¯ã€‚å¦‚æœè¯¥æ¶ˆæ¯æœ‰ `Children`ï¼Œæ˜¾ç¤º "Show X replies" é“¾æ¥ã€‚
-   **ç‚¹å‡»è¡Œä¸º**: 
    -   ç‚¹å‡»æ¶ˆæ¯å¡ç‰‡ -> è·³è½¬åˆ° **è¯¦æƒ…é¡µ (Detail View)**ã€‚
    -   è¯¦æƒ…é¡µç»“æ„:
        -   **Ancestors**: çˆ¶æ¶ˆæ¯è¿çº¿ (å¦‚æœ‰)ã€‚
        -   **Focus**: å½“å‰æ¶ˆæ¯ (å¤§å­—å·ï¼Œé«˜äº®)ã€‚
        -   **Replies**: å­æ¶ˆæ¯åˆ—è¡¨ã€‚

### 2.3 åŒå‘é“¾æ¥ (Bi-directional Links)
-   **è¾“å…¥æ—¶**: è¾“å…¥ `[[` è§¦å‘ `Mention` æ’ä»¶ï¼Œå¼¹å‡ºæœç´¢æ¡†æœç´¢å·²æœ‰ç¬”è®°æ ‡é¢˜ã€‚
-   **æµè§ˆæ—¶**: 
    -   ç‚¹å‡»é“¾æ¥ -> è·¯ç”±è·³è½¬ã€‚
    -   **Hover Card**: é¼ æ ‡æ‚¬åœåœ¨ `[[Link]]` ä¸Šæ—¶ï¼Œé€šè¿‡ Portal æ¸²æŸ“ä¸€ä¸ªæ‚¬æµ®å¡ç‰‡ï¼Œæ˜¾ç¤ºç›®æ ‡ç¬”è®°çš„å‰ 100 å­—æ‘˜è¦ã€‚

---

## 3. AI åé¦ˆå¾ªç¯ (AI Feedback Loops)

AI æ—¢æ˜¯å·¥å…·ä¹Ÿæ˜¯ä¼™ä¼´ï¼Œéœ€è¦æ°å½“çš„åé¦ˆã€‚

### 3.1 éšå½¢åŠ©æ‰‹ (Auto-tagging)
-   ç”¨æˆ·å‘å¸–åï¼ŒUI ä¸éœ€ç­‰å¾… AIã€‚
-   **åå°å¤„ç†**: å‡ ç§’åï¼Œå½“ WebSocket æ¨é€ `message.updated` äº‹ä»¶ï¼ˆåŒ…å«æ–°æ ‡ç­¾ï¼‰æ—¶ï¼š
    -   UI ä¸Šçš„æ ‡ç­¾åŒºåŸŸå‡ºç°å¾®å…‰åŠ¨ç”» (Shimmer Effect)ã€‚
    -   æ–°æ ‡ç­¾æ·¡å…¥æ˜¾ç¤º (Fade in)ã€‚

### 3.2 æ˜¾æ€§å¯¹è¯ (Chat)
-   **å‘¼å‡º**: åœ¨è¯„è®ºåŒºè¾“å…¥ `@goldierill` æˆ–ç‚¹å‡» `/ai ask`ã€‚
-   **æ€è€ƒçŠ¶æ€**: 
    -   æ˜¾ç¤º "Goldie is thinking..." éª¨æ¶å±ã€‚
    -   å¦‚æœæ˜¯æµå¼è¾“å‡º (Streaming)ï¼Œåˆ™å®æ—¶æ‰“å­—æœºæ•ˆæœæ˜¾ç¤ºå†…å®¹ã€‚
    -   **å¼•ç”¨æ¥æº**: å¦‚æœæ˜¯ RAG æ¨¡å¼ï¼Œå›ç­”åº•éƒ¨æ˜¾ç¤º "Sources: [Note A], [Note B]"ã€‚

---

## 4. å®æ—¶åŒæ­¥åé¦ˆ (Realtime Sync)

åŸºäº `Socket.io`ã€‚

-   **ç¼–è¾‘é”å®š**: å½“æ£€æµ‹åˆ°å…¶ä»–ç«¯æ­£åœ¨ç¼–è¾‘å½“å‰ç¬”è®°æ—¶ (æ”¶åˆ° `edit:start` äº‹ä»¶)ï¼š
    -   å½“å‰ç¼–è¾‘å™¨å³ä¸Šè§’æ˜¾ç¤º "ğŸ“± Mobile is editing..."ã€‚
    -   ï¼ˆå¯é€‰ï¼‰å½“å‰è¾“å…¥æ¡†è®¾ä¸ºåªè¯»ï¼Œé¿å…å†²çªï¼Œæˆ–è€…é«˜äº®æ˜¾ç¤ºå¯¹æ–¹å…‰æ ‡ã€‚
-   **åŠ¨æ€æ›´æ–°**: æ—¶é—´çº¿ä¸Šçš„ç‚¹èµæ•°ã€è¯„è®ºæ•°å˜åŒ–å®æ—¶è·³åŠ¨æ›´æ–°ã€‚

---

## 5. ç§»åŠ¨ç«¯æ‰‹åŠ¿ (Mobile Gestures)

-   **é•¿æŒ‰ (Long Press)**: è§¦å‘ä¸Šä¸‹æ–‡èœå• (ContextMenu) -> Copy, Delete, Shareã€‚
-   **å·¦æ»‘ (Swipe Left)**: å¿«é€Ÿå›å¤ (Reply)ã€‚
-   **ä¸‹æ‹‰ (Pull Down)**: å…¨å±€åˆ·æ–°ã€‚
